<!--miniprogram/pages/home/home.wxml-->
<view class="draw-page">
  <!-- é¡¶éƒ¨è£…é¥° -->
  <view class="header-decoration">
    <view class="title">æœ•ç“·çµç­¾</view>
    <view class="subtitle">è¯šå¿ƒç¥ˆæ„¿ Â· é—®åœå‰ç¨‹</view>
  </view>

  <!-- ç­¾ç­’åŠ¨ç”»åŒºåŸŸï¼ˆå¯ç‚¹å‡»ï¼‰ -->
  <view class="drum-area" bindtap="handleDraw">
    <!-- æ‘‡æ™ƒæ‰‹æœºæç¤ºå›¾ç‰‡ï¼ˆå·¦ä¾§ï¼‰ -->
    <view class="shake-hint shake-hint-left" wx:if="{{!isDrawing && !currentSign}}">
      <image
        src="/assets/images/ss.png"
        class="shake-hint-image"
        mode="aspectFit"
      ></image>
    </view>

    <view class="drum-container {{isDrawing ? 'shaking' : ''}}">
      <!-- ç­¾ç­’å›¾ç‰‡ -->
      <image
        src="/assets/images/drum.png"
        class="drum-image"
        mode="aspectFit"
      ></image>

      <!-- å¼¹å‡ºçš„ç­¾æ¡ -->
      <view wx:if="{{showStick}}" class="flying-stick" animation="{{stickAnimation}}">
        <view class="stick-body">
          <text class="stick-number">{{currentSign ? currentSign.number : ''}}</text>
        </view>
      </view>
    </view>

    <!-- æ‘‡æ™ƒæ‰‹æœºæç¤ºå›¾ç‰‡ï¼ˆå³ä¾§ï¼‰ -->
    <view class="shake-hint shake-hint-right" wx:if="{{!isDrawing && !currentSign}}">
      <image
        src="/assets/images/ss.png"
        class="shake-hint-image"
        mode="aspectFit"
      ></image>
    </view>

    <view class="drum-shadow"></view>
  </view>

  <!-- ç­¾æ–‡ç»“æœå¡ç‰‡ -->
  <view wx:if="{{currentSign}}" class="result-card {{showResultCard ? 'show' : ''}}">
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <view class="card-header">
      <view class="sign-number">ç¬¬ {{currentSign.number}} ç­¾</view>
      <view class="sign-level">ã€{{currentSign.name}}ã€‘</view>
    </view>

    <view class="card-body">
      <view class="sign-title">{{currentSign.title}}</view>
      <view class="sign-poem">{{currentSign.poem}}</view>
    </view>

    <!-- è¯¦ç»†è§£ç­¾ï¼ˆç›´æ¥æ˜¾ç¤ºï¼‰ -->
    <view class="card-detail">
      <view class="detail-section">
        <view class="section-title">åœ£æ„</view>
        <view class="section-content">{{currentSign.shengyi}}</view>
      </view>

      <view class="detail-section">
        <view class="section-title">è§£æ›°</view>
        <view class="section-content">{{currentSign.meaning}}</view>
      </view>

      <view class="detail-section">
        <view class="section-title">é‡Šä¹‰</view>
        <view class="section-content">{{currentSign.advice}}</view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="card-actions">
      <button class="action-btn primary" bindtap="handleContinue">
        <text>å†æ±‚ä¸€ç­¾</text>
      </button>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€æç¤º -->
  <view wx:else class="empty-hint">
    <text class="hint-icon">ğŸ™</text>
    <text class="hint-text">è¯šå¿ƒç¥ˆæ„¿ï¼Œç‚¹å‡»ç­¾ç­’å¼€å§‹æŠ½ç­¾</text>
  </view>
</view>

