# å°ç¨‹åºç ç”Ÿæˆè¯´æ˜æ–‡æ¡£

## åŠŸèƒ½è¯´æ˜

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ç”Ÿæˆå¸¦æœ‰ `status` å‚æ•°çš„å°ç¨‹åºç ï¼Œç”¨äºå®ç°ç”¨æˆ·æ‰«ç è‡ªåŠ¨æŠ½å–æŒ‡å®šç­¾å·çš„åŠŸèƒ½ã€‚

---

## ä¸€ã€å°ç¨‹åºç ç±»å‹

å¾®ä¿¡å°ç¨‹åºæä¾›ä¸‰ç§ç”Ÿæˆå°ç¨‹åºç çš„æ¥å£ï¼š

### 1. wxacode.getï¼ˆæ¨èï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦çš„ç æ•°é‡è¾ƒå°‘çš„ä¸šåŠ¡åœºæ™¯
- **æ•°é‡é™åˆ¶**ï¼šæ€»å…±ç”Ÿæˆçš„ç æ•°é‡é™åˆ¶ä¸º 10ä¸‡ä¸ª
- **å‚æ•°é™åˆ¶**ï¼šæœ€å¤§32ä¸ªå¯è§å­—ç¬¦
- **ç‰¹ç‚¹**ï¼šå¯ä»¥æŒ‡å®šé¡µé¢è·¯å¾„å’Œå‚æ•°

### 2. wxacode.getUnlimitedï¼ˆæ¨èç”¨äºæœ¬é¡¹ç›®ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦çš„ç æ•°é‡æå¤šçš„ä¸šåŠ¡åœºæ™¯
- **æ•°é‡é™åˆ¶**ï¼šæ— é™åˆ¶
- **å‚æ•°é™åˆ¶**ï¼šscene å‚æ•°æœ€å¤§32ä¸ªå¯è§å­—ç¬¦
- **ç‰¹ç‚¹**ï¼šé€šè¿‡ scene å‚æ•°ä¼ é€’æ•°æ®

### 3. wxacode.createQRCode
- **é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦çš„ç æ•°é‡è¾ƒå°‘çš„ä¸šåŠ¡åœºæ™¯
- **æ•°é‡é™åˆ¶**ï¼šæ€»å…±ç”Ÿæˆçš„ç æ•°é‡é™åˆ¶ä¸º 10ä¸‡ä¸ª
- **ç‰¹ç‚¹**ï¼šç”Ÿæˆæ™®é€šäºŒç»´ç ï¼ˆéå°ç¨‹åºç æ ·å¼ï¼‰

---

## äºŒã€æ¨èæ–¹æ¡ˆï¼šä½¿ç”¨ getUnlimited æ¥å£

### ä¸ºä»€ä¹ˆé€‰æ‹© getUnlimitedï¼Ÿ

1. **æ•°é‡æ— é™åˆ¶**ï¼šå¯ä»¥ä¸ºæ¯ä¸ªç­¾ï¼ˆ1-61ç­¾ï¼‰ç”Ÿæˆç‹¬ç«‹çš„äºŒç»´ç 
2. **é€‚åˆçº¿ä¸‹åœºæ™¯**ï¼šå¯ä»¥æ‰“å°61ä¸ªä¸åŒçš„äºŒç»´ç è´´åœ¨å®ä½“ç­¾ä¸Š
3. **å‚æ•°ç®€æ´**ï¼šé€šè¿‡ scene å‚æ•°ä¼ é€’ç­¾å·

---

## ä¸‰ã€åç«¯å®ç°ï¼ˆNode.js ç¤ºä¾‹ï¼‰

### 3.1 å®‰è£…ä¾èµ–

```bash
npm install axios
```

### 3.2 è·å– Access Token

```javascript
const axios = require('axios');

// å°ç¨‹åºé…ç½®
const APPID = 'your_appid';
const SECRET = 'your_secret';

// è·å– access_token
async function getAccessToken() {
  const url = `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${APPID}&secret=${SECRET}`;
  
  try {
    const response = await axios.get(url);
    return response.data.access_token;
  } catch (error) {
    console.error('è·å– access_token å¤±è´¥:', error);
    throw error;
  }
}
```

### 3.3 ç”Ÿæˆå°ç¨‹åºç 

```javascript
const fs = require('fs');

// ç”Ÿæˆå°ç¨‹åºç 
async function generateQRCode(signNumber) {
  const accessToken = await getAccessToken();
  const url = `https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=${accessToken}`;
  
  const data = {
    // scene å‚æ•°ï¼šç­¾å·ä¿¡æ¯
    scene: `status=${signNumber}`,
    
    // é¡µé¢è·¯å¾„ï¼ˆå¿…é¡»æ˜¯å·²å‘å¸ƒçš„å°ç¨‹åºé¡µé¢ï¼‰
    page: 'pages/home/home',
    
    // äºŒç»´ç å®½åº¦ï¼ˆå•ä½ï¼špxï¼Œæœ€å°280ï¼Œæœ€å¤§1280ï¼‰
    width: 430,
    
    // æ˜¯å¦éœ€è¦é€æ˜åº•è‰²
    is_hyaline: false,
    
    // è‡ªåŠ¨é…ç½®çº¿æ¡é¢œè‰²
    auto_color: false,
    
    // çº¿æ¡é¢œè‰²ï¼ˆRGBæ ¼å¼ï¼‰
    line_color: { r: 0, g: 0, b: 0 }
  };
  
  try {
    const response = await axios.post(url, data, {
      responseType: 'arraybuffer'
    });
    
    // ä¿å­˜å›¾ç‰‡
    const filename = `qrcode_sign_${signNumber}.png`;
    fs.writeFileSync(filename, response.data);
    console.log(`ç¬¬${signNumber}ç­¾çš„äºŒç»´ç å·²ç”Ÿæˆ: ${filename}`);
    
    return filename;
  } catch (error) {
    console.error(`ç”Ÿæˆç¬¬${signNumber}ç­¾äºŒç»´ç å¤±è´¥:`, error);
    throw error;
  }
}
```

### 3.4 æ‰¹é‡ç”Ÿæˆ61ä¸ªç­¾çš„äºŒç»´ç 

```javascript
// æ‰¹é‡ç”Ÿæˆæ‰€æœ‰ç­¾çš„äºŒç»´ç 
async function generateAllQRCodes() {
  console.log('å¼€å§‹æ‰¹é‡ç”ŸæˆäºŒç»´ç ...');
  
  for (let i = 1; i <= 61; i++) {
    try {
      await generateQRCode(i);
      console.log(`è¿›åº¦: ${i}/61`);
      
      // é¿å…é¢‘ç‡é™åˆ¶ï¼Œæ¯æ¬¡ç”Ÿæˆåå»¶è¿Ÿ100ms
      await new Promise(resolve => setTimeout(resolve, 100));
    } catch (error) {
      console.error(`ç¬¬${i}ç­¾ç”Ÿæˆå¤±è´¥ï¼Œè·³è¿‡`);
    }
  }
  
  console.log('æ‰€æœ‰äºŒç»´ç ç”Ÿæˆå®Œæˆï¼');
}

// æ‰§è¡Œç”Ÿæˆ
generateAllQRCodes();
```

---

## å››ã€å®Œæ•´ç¤ºä¾‹ä»£ç 

åˆ›å»ºæ–‡ä»¶ `generate-qrcodes.js`ï¼š

```javascript
const axios = require('axios');
const fs = require('fs');
const path = require('path');

// ========== é…ç½®åŒº ==========
const APPID = 'your_appid_here';        // æ›¿æ¢ä¸ºä½ çš„å°ç¨‹åº AppID
const SECRET = 'your_secret_here';      // æ›¿æ¢ä¸ºä½ çš„å°ç¨‹åº Secret
const OUTPUT_DIR = './qrcodes';         // äºŒç»´ç è¾“å‡ºç›®å½•
// ============================

// åˆ›å»ºè¾“å‡ºç›®å½•
if (!fs.existsSync(OUTPUT_DIR)) {
  fs.mkdirSync(OUTPUT_DIR, { recursive: true });
}

// è·å– access_token
async function getAccessToken() {
  const url = `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${APPID}&secret=${SECRET}`;

  try {
    const response = await axios.get(url);
    if (response.data.access_token) {
      console.log('âœ… Access Token è·å–æˆåŠŸ');
      return response.data.access_token;
    } else {
      throw new Error(response.data.errmsg || 'è·å– access_token å¤±è´¥');
    }
  } catch (error) {
    console.error('âŒ è·å– access_token å¤±è´¥:', error.message);
    throw error;
  }
}

// ç”Ÿæˆå•ä¸ªç­¾çš„å°ç¨‹åºç 
async function generateQRCode(accessToken, signNumber) {
  const url = `https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=${accessToken}`;

  const data = {
    scene: `status=${signNumber}`,
    page: 'pages/home/home',
    width: 430,
    is_hyaline: false,
    auto_color: false,
    line_color: { r: 212, g: 175, b: 55 }  // é‡‘è‰²çº¿æ¡
  };

  try {
    const response = await axios.post(url, data, {
      responseType: 'arraybuffer'
    });

    // æ£€æŸ¥æ˜¯å¦è¿”å›é”™è¯¯
    if (response.headers['content-type'].includes('application/json')) {
      const errorData = JSON.parse(response.data.toString());
      throw new Error(errorData.errmsg || 'ç”Ÿæˆå¤±è´¥');
    }

    // ä¿å­˜å›¾ç‰‡
    const filename = path.join(OUTPUT_DIR, `sign_${String(signNumber).padStart(2, '0')}.png`);
    fs.writeFileSync(filename, response.data);
    console.log(`âœ… ç¬¬${signNumber}ç­¾äºŒç»´ç å·²ç”Ÿæˆ: ${filename}`);

    return filename;
  } catch (error) {
    console.error(`âŒ ç¬¬${signNumber}ç­¾ç”Ÿæˆå¤±è´¥:`, error.message);
    throw error;
  }
}

// æ‰¹é‡ç”Ÿæˆæ‰€æœ‰ç­¾çš„äºŒç»´ç 
async function generateAllQRCodes() {
  console.log('ğŸš€ å¼€å§‹æ‰¹é‡ç”ŸæˆäºŒç»´ç ...\n');

  try {
    // è·å– access_token
    const accessToken = await getAccessToken();

    // ç”Ÿæˆ61ä¸ªç­¾çš„äºŒç»´ç 
    for (let i = 1; i <= 61; i++) {
      try {
        await generateQRCode(accessToken, i);

        // é¿å…é¢‘ç‡é™åˆ¶
        await new Promise(resolve => setTimeout(resolve, 100));
      } catch (error) {
        console.error(`âš ï¸  ç¬¬${i}ç­¾ç”Ÿæˆå¤±è´¥ï¼Œç»§ç»­ä¸‹ä¸€ä¸ª...`);
      }
    }

    console.log('\nğŸ‰ æ‰€æœ‰äºŒç»´ç ç”Ÿæˆå®Œæˆï¼');
    console.log(`ğŸ“ è¾“å‡ºç›®å½•: ${path.resolve(OUTPUT_DIR)}`);
  } catch (error) {
    console.error('\nâŒ æ‰¹é‡ç”Ÿæˆå¤±è´¥:', error.message);
  }
}

// æ‰§è¡Œç”Ÿæˆ
generateAllQRCodes();
```

---

## äº”ã€ä½¿ç”¨æ­¥éª¤

### æ­¥éª¤1ï¼šè·å–å°ç¨‹åºå‡­è¯

1. ç™»å½• [å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)
2. è¿›å…¥ã€Œå¼€å‘ã€-ã€Œå¼€å‘ç®¡ç†ã€-ã€Œå¼€å‘è®¾ç½®ã€
3. å¤åˆ¶ **AppID** å’Œ **AppSecret**

### æ­¥éª¤2ï¼šé…ç½®ä»£ç 

å°†ä¸Šé¢çš„å®Œæ•´ä»£ç ä¿å­˜ä¸º `generate-qrcodes.js`ï¼Œå¹¶ä¿®æ”¹é…ç½®ï¼š

```javascript
const APPID = 'wx1234567890abcdef';     // æ›¿æ¢ä¸ºä½ çš„ AppID
const SECRET = 'abcdef1234567890abcd';  // æ›¿æ¢ä¸ºä½ çš„ AppSecret
```

### æ­¥éª¤3ï¼šå®‰è£…ä¾èµ–å¹¶è¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
npm install axios

# è¿è¡Œè„šæœ¬
node generate-qrcodes.js
```

### æ­¥éª¤4ï¼šæŸ¥çœ‹ç”Ÿæˆç»“æœ

ç”Ÿæˆçš„äºŒç»´ç å°†ä¿å­˜åœ¨ `./qrcodes/` ç›®å½•ä¸‹ï¼š

```
qrcodes/
â”œâ”€â”€ sign_01.png    # ç¬¬1ç­¾
â”œâ”€â”€ sign_02.png    # ç¬¬2ç­¾
â”œâ”€â”€ sign_03.png    # ç¬¬3ç­¾
...
â””â”€â”€ sign_61.png    # ç¬¬61ç­¾
```

---

## å…­ã€å‚æ•°è¯´æ˜

### scene å‚æ•°æ ¼å¼

| å‚æ•°å | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|-------|------|------|------|
| status | Number | ç­¾å·ï¼ˆ1-61ï¼‰ | `status=4` |

### å®Œæ•´å‚æ•°é…ç½®

```javascript
{
  // å¿…å¡«ï¼šåœºæ™¯å€¼ï¼Œæœ€å¤§32ä¸ªå¯è§å­—ç¬¦
  scene: "status=4",

  // å¿…å¡«ï¼šé¡µé¢è·¯å¾„ï¼ˆå¿…é¡»æ˜¯å·²å‘å¸ƒçš„å°ç¨‹åºé¡µé¢ï¼‰
  page: "pages/home/home",

  // å¯é€‰ï¼šäºŒç»´ç å®½åº¦ï¼ˆpxï¼‰ï¼Œé»˜è®¤430ï¼Œæœ€å°280ï¼Œæœ€å¤§1280
  width: 430,

  // å¯é€‰ï¼šæ˜¯å¦éœ€è¦é€æ˜åº•è‰²ï¼Œé»˜è®¤false
  is_hyaline: false,

  // å¯é€‰ï¼šè‡ªåŠ¨é…ç½®çº¿æ¡é¢œè‰²ï¼Œé»˜è®¤false
  auto_color: false,

  // å¯é€‰ï¼šçº¿æ¡é¢œè‰²ï¼ˆRGBæ ¼å¼ï¼‰
  line_color: {
    r: 212,  // çº¢è‰²åˆ†é‡ (0-255)
    g: 175,  // ç»¿è‰²åˆ†é‡ (0-255)
    b: 55    // è“è‰²åˆ†é‡ (0-255) - é‡‘è‰²
  },

  // å¯é€‰ï¼šæ£€æµ‹å›¾ç‰‡åŒ…å«çš„å†…å®¹ï¼Œé»˜è®¤false
  check_path: false,

  // å¯é€‰ï¼šç¯å¢ƒç‰ˆæœ¬ï¼Œrelease-æ­£å¼ç‰ˆï¼Œtrial-ä½“éªŒç‰ˆï¼Œdevelop-å¼€å‘ç‰ˆ
  env_version: "release"
}
```

---

## ä¸ƒã€æ³¨æ„äº‹é¡¹

### 1. é¡µé¢è·¯å¾„è¦æ±‚
- é¡µé¢è·¯å¾„å¿…é¡»åœ¨ `app.json` çš„ `pages` ä¸­æ³¨å†Œ
- é¡µé¢å¿…é¡»å·²å‘å¸ƒåˆ°çº¿ä¸Šï¼ˆæ­£å¼ç‰ˆï¼‰
- ä¸èƒ½æ˜¯ tabBar é¡µé¢

### 2. scene å‚æ•°é™åˆ¶
- æœ€å¤§é•¿åº¦ï¼š32ä¸ªå¯è§å­—ç¬¦
- åªæ”¯æŒæ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ã€ç­‰å·ã€&ç¬¦å·
- ä¼šè‡ªåŠ¨è¿›è¡Œ URL encode

### 3. é¢‘ç‡é™åˆ¶
- å»ºè®®æ¯æ¬¡ç”Ÿæˆé—´éš” 100ms ä»¥ä¸Š
- é¿å…çŸ­æ—¶é—´å†…å¤§é‡è¯·æ±‚

### 4. access_token æœ‰æ•ˆæœŸ
- æœ‰æ•ˆæœŸï¼š7200ç§’ï¼ˆ2å°æ—¶ï¼‰
- å»ºè®®ç¼“å­˜ä½¿ç”¨ï¼Œé¿å…é¢‘ç¹è·å–

---

## å…«ã€æµ‹è¯•éªŒè¯

### 1. ç”Ÿæˆæµ‹è¯•äºŒç»´ç 

```javascript
// åªç”Ÿæˆç¬¬4ç­¾çš„äºŒç»´ç è¿›è¡Œæµ‹è¯•
async function testGenerate() {
  const accessToken = await getAccessToken();
  await generateQRCode(accessToken, 4);
  console.log('æµ‹è¯•äºŒç»´ç ç”Ÿæˆå®Œæˆï¼');
}

testGenerate();
```

### 2. æ‰«ç æµ‹è¯•æµç¨‹

1. ç”Ÿæˆç¬¬4ç­¾çš„äºŒç»´ç 
2. ä½¿ç”¨å¾®ä¿¡æ‰«æäºŒç»´ç 
3. è§‚å¯Ÿå°ç¨‹åºæ˜¯å¦è‡ªåŠ¨å¼€å¯ç¬¬4ç­¾
4. éªŒè¯ç­¾æ–‡å†…å®¹æ˜¯å¦æ­£ç¡®

### 3. å¼€å‘ç¯å¢ƒæµ‹è¯•

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š
- ç¼–è¯‘æ¨¡å¼ï¼šæ·»åŠ ç¼–è¯‘æ¨¡å¼
- å¯åŠ¨å‚æ•°ï¼š`scene=status%3D4`
- éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## ä¹ã€å¸¸è§é—®é¢˜

### Q1: æç¤º "invalid page hint"
**åŸå› **ï¼šé¡µé¢è·¯å¾„ä¸å­˜åœ¨æˆ–æœªåœ¨ app.json ä¸­æ³¨å†Œ
**è§£å†³**ï¼šæ£€æŸ¥ `miniprogram/app.json` ä¸­æ˜¯å¦åŒ…å« `pages/home/home`

### Q2: æç¤º "access_token is invalid"
**åŸå› **ï¼šAppID æˆ– AppSecret é…ç½®é”™è¯¯
**è§£å†³**ï¼šé‡æ–°æ£€æŸ¥å¹¶å¤åˆ¶æ­£ç¡®çš„å‡­è¯

### Q3: ç”Ÿæˆçš„æ˜¯é”™è¯¯ä¿¡æ¯çš„ JSON
**åŸå› **ï¼šå‚æ•°é…ç½®é”™è¯¯æˆ–æƒé™ä¸è¶³
**è§£å†³**ï¼šæ£€æŸ¥è¿”å›çš„é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯

### Q4: æ‰«ç åæ²¡æœ‰è‡ªåŠ¨æŠ½ç­¾
**åŸå› **ï¼šscene å‚æ•°æœªæ­£ç¡®ä¼ é€’
**è§£å†³**ï¼š
1. æ£€æŸ¥ `onLoad(options)` ä¸­æ˜¯å¦æ¥æ”¶åˆ° `options.scene`
2. åœ¨æ§åˆ¶å°æŸ¥çœ‹æ—¥å¿—è¾“å‡º
3. ç¡®è®¤ scene å‚æ•°æ ¼å¼æ­£ç¡®

### Q5: æç¤º "ç­¾å·æ— æ•ˆ"
**åŸå› **ï¼šç­¾å·è¶…å‡ºèŒƒå›´ï¼ˆ1-61ï¼‰
**è§£å†³**ï¼šæ£€æŸ¥ scene å‚æ•°ä¸­çš„ status å€¼

---

## åã€çº¿ä¸‹åº”ç”¨åœºæ™¯

### åœºæ™¯1ï¼šå®ä½“ç­¾æ¡
1. ç”Ÿæˆ61ä¸ªäºŒç»´ç 
2. æ‰“å°å¹¶è´´åœ¨å®ä½“ç­¾æ¡ä¸Š
3. ç”¨æˆ·æŠ½åˆ°ç­¾åæ‰«ç æŸ¥çœ‹è¯¦ç»†è§£ç­¾

### åœºæ™¯2ï¼šå±•ç¤ºå¢™
1. åˆ¶ä½œ61ç­¾å±•ç¤ºå¢™
2. æ¯ä¸ªç­¾ä½è´´ä¸Šå¯¹åº”äºŒç»´ç 
3. ç”¨æˆ·å¯ç›´æ¥æ‰«ç æŸ¥çœ‹ä»»æ„ç­¾æ–‡

### åœºæ™¯3ï¼šæ´»åŠ¨æ¨å¹¿
1. ç”Ÿæˆç‰¹å®šç­¾å·çš„äºŒç»´ç 
2. ç”¨äºæ´»åŠ¨æµ·æŠ¥æˆ–å®£ä¼ ç‰©æ–™
3. å¼•å¯¼ç”¨æˆ·æ‰«ç ä½“éªŒ

---

## åä¸€ã€è¿›é˜¶åŠŸèƒ½

### 1. æ·»åŠ æ›´å¤šå‚æ•°

å¯ä»¥åœ¨ scene ä¸­æ·»åŠ æ›´å¤šå‚æ•°ï¼š

```javascript
scene: "status=4&from=offline&event=newyear"
```

å°ç¨‹åºç«¯è§£æï¼š

```javascript
// miniprogram/pages/home/home.js
parseSceneParams(sceneStr) {
  const params = {}
  const pairs = sceneStr.split('&')

  pairs.forEach(pair => {
    const [key, value] = pair.split('=')
    if (key && value) {
      params[key] = value
    }
  })

  return params
  // è¿”å›: { status: "4", from: "offline", event: "newyear" }
}
```

### 2. ç»Ÿè®¡åˆ†æ

å¯ä»¥é€šè¿‡é¢å¤–å‚æ•°è¿›è¡Œæ•°æ®ç»Ÿè®¡ï¼š

```javascript
scene: "status=4&channel=poster_a"  // æ¸ é“Açš„æµ·æŠ¥
scene: "status=4&channel=poster_b"  // æ¸ é“Bçš„æµ·æŠ¥
```

---

## åäºŒã€ç›¸å…³æ–‡æ¡£

- [å¾®ä¿¡å®˜æ–¹æ–‡æ¡£ - è·å–å°ç¨‹åºç ](https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.getUnlimited.html)
- [æ‰«ç è‡ªåŠ¨æŠ½ç­¾æµ‹è¯•è¯´æ˜](./æ‰«ç è‡ªåŠ¨æŠ½ç­¾æµ‹è¯•è¯´æ˜.md)
- [å°ç¨‹åºå¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/)

---

## é™„å½•ï¼šå®Œæ•´å¯è¿è¡Œä»£ç 

å°†ä»¥ä¸‹ä»£ç ä¿å­˜ä¸º `generate-qrcodes.js`ï¼Œä¿®æ”¹é…ç½®åç›´æ¥è¿è¡Œï¼š

```javascript
const axios = require('axios');
const fs = require('fs');
const path = require('path');

// ========== é…ç½®åŒº ==========
const APPID = 'your_appid_here';
const SECRET = 'your_secret_here';
const OUTPUT_DIR = './qrcodes';
// ============================

if (!fs.existsSync(OUTPUT_DIR)) {
  fs.mkdirSync(OUTPUT_DIR, { recursive: true });
}

async function getAccessToken() {
  const url = `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${APPID}&secret=${SECRET}`;
  const response = await axios.get(url);
  return response.data.access_token;
}

async function generateQRCode(accessToken, signNumber) {
  const url = `https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=${accessToken}`;
  const data = {
    scene: `status=${signNumber}`,
    page: 'pages/home/home',
    width: 430,
    is_hyaline: false,
    auto_color: false,
    line_color: { r: 212, g: 175, b: 55 }
  };

  const response = await axios.post(url, data, { responseType: 'arraybuffer' });
  const filename = path.join(OUTPUT_DIR, `sign_${String(signNumber).padStart(2, '0')}.png`);
  fs.writeFileSync(filename, response.data);
  console.log(`âœ… ç¬¬${signNumber}ç­¾äºŒç»´ç å·²ç”Ÿæˆ`);
}

async function generateAllQRCodes() {
  const accessToken = await getAccessToken();
  for (let i = 1; i <= 61; i++) {
    await generateQRCode(accessToken, i);
    await new Promise(resolve => setTimeout(resolve, 100));
  }
  console.log('ğŸ‰ å®Œæˆï¼');
}

generateAllQRCodes();
```

---

## æ€»ç»“

é€šè¿‡æœ¬æ–‡æ¡£ï¼Œä½ å¯ä»¥ï¼š

1. âœ… ç†è§£å¾®ä¿¡å°ç¨‹åºç çš„ç”Ÿæˆæœºåˆ¶
2. âœ… ä½¿ç”¨ Node.js æ‰¹é‡ç”Ÿæˆ61ä¸ªç­¾çš„äºŒç»´ç 
3. âœ… é…ç½® scene å‚æ•°å®ç°æ‰«ç è‡ªåŠ¨æŠ½ç­¾
4. âœ… åº”ç”¨åˆ°çº¿ä¸‹åœºæ™¯ï¼ˆå®ä½“ç­¾æ¡ã€å±•ç¤ºå¢™ç­‰ï¼‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- [å¾®ä¿¡å®˜æ–¹æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.getUnlimited.html)
- [æ‰«ç è‡ªåŠ¨æŠ½ç­¾æµ‹è¯•è¯´æ˜](./æ‰«ç è‡ªåŠ¨æŠ½ç­¾æµ‹è¯•è¯´æ˜.md)

